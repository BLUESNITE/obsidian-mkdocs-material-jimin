# k3s ê¸°ì´ˆ ê°œë… ê°€ì´ë“œ

| AI ë„ì›€ì„ ë°›ì•„ ë¬¸ì„œë¥¼ ì‘ì„±í•˜ì˜€ìŠµë‹ˆë‹¤.

> [!INFO] ì •ë³´
> ì´ ë¬¸ì„œëŠ” Kubernetesì™€ k3së¥¼ ì²˜ìŒ ì ‘í•˜ëŠ” ë¶„ë“¤ì„ ìœ„í•œ ê¸°ì´ˆ ê°œë… ê°€ì´ë“œì…ë‹ˆë‹¤.
> GPU ë¶„ì‚° ì²˜ë¦¬ë¥¼ ìœ„í•œ Kubeflow í™˜ê²½ êµ¬ì¶• ì „ì— ë°˜ë“œì‹œ ì•Œì•„ì•¼ í•  ë‚´ìš©ì„ ë‹¤ë£¹ë‹ˆë‹¤.

## ëª©ì°¨
1. [ì»¨í…Œì´ë„ˆì™€ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜](#1-ì»¨í…Œì´ë„ˆì™€-ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜)
2. [Kubernetesë€?](#2-kubernetesë€)
3. [k3së€?](#3-k3së€)
4. [k8s vs k3s vs k3d ë¹„êµ](#4-k8s-vs-k3s-vs-k3d-ë¹„êµ)
5. [í´ëŸ¬ìŠ¤í„° ì•„í‚¤í…ì²˜](#5-í´ëŸ¬ìŠ¤í„°-ì•„í‚¤í…ì²˜)
6. [í•µì‹¬ ì˜¤ë¸Œì íŠ¸](#6-í•µì‹¬-ì˜¤ë¸Œì íŠ¸)
7. [ë„¤íŠ¸ì›Œí‚¹ ê°œë…](#7-ë„¤íŠ¸ì›Œí‚¹-ê°œë…)
8. [ìŠ¤í† ë¦¬ì§€ ê°œë…](#8-ìŠ¤í† ë¦¬ì§€-ê°œë…)
9. [kubectl í•„ìˆ˜ ëª…ë ¹ì–´](#9-kubectl-í•„ìˆ˜-ëª…ë ¹ì–´)
10. [ë‹¤ìŒ ë‹¨ê³„](#10-ë‹¤ìŒ-ë‹¨ê³„)

## 1. ì»¨í…Œì´ë„ˆì™€ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜
### 1.1 ì»¨í…Œì´ë„ˆë€?
**ì»¨í…Œì´ë„ˆ**ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ ê·¸ ì‹¤í–‰ì— í•„ìš”í•œ ëª¨ë“  ê²ƒ(ì½”ë“œ, ëŸ°íƒ€ì„, ë¼ì´ë¸ŒëŸ¬ë¦¬, ì„¤ì •)ì„ í•˜ë‚˜ì˜ íŒ¨í‚¤ì§€ë¡œ ë¬¶ì€ ê²ƒì…ë‹ˆë‹¤. (ì½”ë“œ ì‹¤í–‰ì„ ëª©ì ìœ¼ë¡œ í•˜ëŠ” ê²ƒ ì´ì™¸ ë¶ˆí•„ìš”í•œ ë¦¬ì†ŒìŠ¤ëŠ” ì œì™¸í•œ í˜•íƒœ)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     í˜¸ìŠ¤íŠ¸ OS (Linux)                                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                   ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„ (containerd)                                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ì»¨í…Œì´ë„ˆ A           â”‚  ì»¨í…Œì´ë„ˆ B           â”‚  ì»¨í…Œì´ë„ˆ C             â”‚  ì»¨í…Œì´ë„ˆ D   â”‚
â”‚  (Python)           â”‚  (Node.js)           â”‚  (MySQL)             â”‚  (Redis)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
### 1.2 ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ì´ í•„ìš”í•œ ì´ìœ 

ì ì€ ìˆ˜ì˜ ì»¨í…Œì´ë„ˆ **1~2**ê°œì¼ ë•ŒëŠ” docker ìš´ì˜ìœ¼ë¡œë„ ì¶©ë¶„í•©ë‹ˆë‹¤. ë‹¤ë§Œ ê·¸ ìˆ˜ê°€ **ìˆ˜ì‹­ì—ì„œ ìˆ˜ë°±ê°œê°€**ëœë‹¤ë©´?
ê´€ë¦¬ìš´ì˜ìëŠ” ë‹¤ìŒê³¼ ê°™ì€ ê³ ë¯¼ì„ í•˜ê²Œ ë©ë‹ˆë‹¤.

1. ì–´ë”” ì„œë²„ì— ì–´ë–¤ ë²„ì „ì„ ë°°í¬í•˜ì§€?
2. ì»¨í…Œì´ë„ˆê°€ ë¬¸ì œ ìƒê¸°ë©´ ëˆ„ê°€ ë‹´ë‹¹ì„ í•  ìˆ˜ ìˆì§€?
3. íŠ¸ë˜í”½ ë° ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ì´ ì¦ê°€í•˜ë©´ ì–´ë–»ê²Œ ëŒ€ì‘í•  ìˆ˜ ìˆì§€?
4. ë¬´ì¤‘ë‹¨ ë°°í¬ëŠ” í•  ìˆ˜ ìˆë‚˜?

ì´ëŸ¬í•œ ì¥ë¥´ì˜ ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ê²ƒì´ **ì»¨í…Œì´ë„ˆ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜**ì´ê³  ì´ì‹œì¥ì—ì„œ í‘œì¤€ì´ ë˜ê³  ìˆëŠ”ê±´ **Kubernetes**ì…ë‹ˆë‹¤.
## 2. ê·¸ë ‡ë‹¤ë©´ Kubernetesë€?

> [!TIP] ì •ì˜
> **Kubernetes** (K8s, ì¿ ë²„ë„¤í‹°ìŠ¤)ëŠ” Googleì´ ë§Œë“  ì˜¤í”ˆì†ŒìŠ¤ ì»¨í…Œì´ë„ˆ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ í”Œë«í¼ì…ë‹ˆë‹¤.
> ê·¸ë¦¬ê³ 
> **K8s**: Kubernetesì˜ ì•½ì. Kì™€ s ì‚¬ì´ì— 8ê¸€ìê°€ ìˆì–´ì„œ K8së¼ê³  ì”ë‹ˆë‹¤.

> [!CODE] ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ ì£¼ìš” ì—­í• 
> 1. ìë™ ë°°í¬ > ì»¨í…Œì´ë„ˆë¥¼ ì ì ˆí•œ ë…¸ë“œì— ìë™ ë°°ì¹˜
> 2. ìë™ ë³µêµ¬ > ì¥ì•  ë°œìƒ ì‹œ ì»¨í…Œì´ë„ˆ ìë™ ì¬ì‹œì‘
> 3. ìë™ ìŠ¤ì¼€ì¼ë§ > ë¶€í•˜ì— ë”°ë¼ ì»¨í…Œì´ë„ˆ ìˆ˜ ìë™ ì¡°ì ˆ
> 4. ë¡œë“œ ë°¸ëŸ°ì‹± > íŠ¸ë˜í”½ì„ ì—¬ëŸ¬ ì»¨í…Œì´ë„ˆì— ë¶„ì‚°
> 5. ì‹œí¬ë¦¿ ê´€ë¦¬ > ë¹„ë°€ë²ˆí˜¸, API í‚¤ ë“± ì•ˆì „í•˜ê²Œ ê´€ë¦¬
> 6. ë¡¤ë§ ì—…ë°ì´íŠ¸ > ë¬´ì¤‘ë‹¨ ë°°í¬ ì§€ì›

### ì£¼ìš” íŠ¹ì§• ì„ ì–¸ì (Declarative) ë°©ì‹

> [!CHECK] ì² í•™
> Kubernetesì˜ í•µì‹¬ ì² í•™ì€ **"ì›í•˜ëŠ” ìƒíƒœë¥¼ ì„ ì–¸í•˜ë©´, ì‹œìŠ¤í…œì´ ì•Œì•„ì„œ ë§ì¶˜ë‹¤"** ì…ë‹ˆë‹¤.

*ì˜ˆì‹œ*

```yaml
# "ë‚˜ëŠ” nginx ì»¨í…Œì´ë„ˆê°€ 3ê°œ ìˆì—ˆìœ¼ë©´ ì¢‹ê² ì–´"
apiVersion: apps/v1
kind: Deployment
metadata:
  name: nginx
spec:
  replicas: 3  # â† ì›í•˜ëŠ” ìƒíƒœ: 3ê°œ
  selector:
    matchLabels:
      app: nginx
  template:
    metadata:
      labels:
        app: nginx
    spec:
      containers:
      - name: nginx
        image: nginx:1.25
```

KubernetesëŠ” í˜„ì¬ ìƒíƒœë¥¼ ì§€ì†ì ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§í•˜ê³ , ì›í•˜ëŠ” ìƒíƒœì™€ ë‹¤ë¥´ë©´ ìë™ìœ¼ë¡œ ì¡°ì •í•©ë‹ˆë‹¤.

```
ì›í•˜ëŠ” ìƒíƒœ: 3ê°œ
í˜„ì¬ ìƒíƒœ: 2ê°œ (í•˜ë‚˜ê°€ ì£½ìŒ)
â†’ Kubernetes: "1ê°œ ë” ë§Œë“¤ì–´ì•¼ê² ë‹¤!" (ìë™ ë³µêµ¬)
```
## 3. ê·¸ëŸ°ë° k3së€?

> [!TIP] k3s
> Rancher Labsê°€ ë§Œë“  **ê²½ëŸ‰ Kubernetes ë°°í¬íŒ**ì…ë‹ˆë‹¤.
> **k3s**: Kubernetes(K8s)ì˜ ì ˆë°˜ í¬ê¸°ë¼ëŠ” ì˜ë¯¸ë¡œ k3së¼ê³  ëª…ëª…ë˜ì—ˆìŠµë‹ˆë‹¤.

### 3.2 k3sì˜ íŠ¹ì§•

> [!CODE] k3sì˜ ì£¼ìš” íŠ¹ì§•
> 1. ë‹¨ì¼ ë°”ì´ë„ˆë¦¬ > ~70MB í•˜ë‚˜ì˜ ì‹¤í–‰ íŒŒì¼
> 2. ë¹ ë¥¸ ì„¤ì¹˜ > 30ì´ˆ ë‚´ ì„¤ì¹˜ ì™„ë£Œ
> 3. ë‚®ì€ ë©”ëª¨ë¦¬ > 512MB RAMìœ¼ë¡œë„ ì‹¤í–‰ ê°€ëŠ¥
> 4. ë‚´ì¥ DB > etcd ëŒ€ì‹  SQLite (ê¸°ë³¸ê°’)
> 5. ë°°í„°ë¦¬ í¬í•¨ > Flannel, CoreDNS, Traefik ë‚´ì¥ (ì£¼ë¡œ CoreDNSë§Œ ì‚¬ìš©)
> 6. ì—£ì§€/IoT ìµœì í™” > ë¼ì¦ˆë² ë¦¬íŒŒì´ì—ì„œë„ ì‹¤í–‰ ê°€ëŠ¥ (?)

### *k3sê°€ ì œê±°/êµì²´í•œ ê²ƒë“¤*

| ì»´í¬ë„ŒíŠ¸     | K8s (í‘œì¤€)          | k3s                                     |
| -------- | ----------------- | --------------------------------------- |
| ë°ì´í„° ì €ì¥ì†Œ  | etcd              | SQLite (ê¸°ë³¸), etcd/MySQL/PostgreSQL (ì„ íƒ) |
| ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„ | Docker/containerd | containerd (ë‚´ì¥)                         |
| ë„¤íŠ¸ì›Œí‚¹     | ë³„ë„ ì„¤ì¹˜ í•„ìš”          | Flannel (ë‚´ì¥)                            |
| ì¸ê·¸ë ˆìŠ¤     | ë³„ë„ ì„¤ì¹˜ í•„ìš”          | Traefik (ë‚´ì¥)                            |
| ë¡œë“œë°¸ëŸ°ì„œ    | í´ë¼ìš°ë“œ ì˜ì¡´           | ServiceLB (ë‚´ì¥)                          |
### *k8s vs k3s vs k3d ë¹„êµ*

| í•­ëª©          | K8s       | k3s              | k3d                |     |
| ----------- | --------- | ---------------- | ------------------ | --- |
| **ë³µì¡ë„**     | ë†’ìŒ        | ë‚®ìŒ               | ë§¤ìš° ë‚®ìŒ              |     |
| **ì„¤ì¹˜ ì‹œê°„**   | ìˆ˜ì‹­ ë¶„~ìˆ˜ ì‹œê°„ | 30ì´ˆ              | 10ì´ˆ                |     |
| **ìµœì†Œ RAM**  | 2GB+      | 512MB            | 512MB              |     |
| **ë°”ì´ë„ˆë¦¬ í¬ê¸°** | ~1GB+     | ~70MB            | Docker ì´ë¯¸ì§€         |     |
| **ì‹¤í–‰ ë°©ì‹**   | í˜¸ìŠ¤íŠ¸ ì§ì ‘    | í˜¸ìŠ¤íŠ¸ ì§ì ‘           | Docker ì»¨í…Œì´ë„ˆ        |     |
| **ì‚­ì œ ìš©ì´ì„±**  | ë³µì¡        | k3s-uninstall.sh | k3d cluster delete |     |
| **ë©€í‹° ë…¸ë“œ**   | ë³µì¡        | SSHë¡œ ì—°ê²°          | ëª…ë ¹ì–´ í•˜ë‚˜             |     |
| **í”„ë¡œë•ì…˜**    | âœ… ìµœì       | âœ… ê°€ëŠ¥             | âŒ ê°œë°œìš©              |     |
| **GPU ì§€ì›**  | âœ…         | âœ…                | âš ï¸ ì„¤ì • ë³µì¡           |     |

## 4. í´ëŸ¬ìŠ¤í„° ì•„í‚¤í…ì²˜
### 4.1 í´ëŸ¬ìŠ¤í„°ë€?

**í´ëŸ¬ìŠ¤í„°**ëŠ” ì—¬ëŸ¬ ëŒ€ì˜ ì»´í“¨í„°(ë…¸ë“œ) í•˜ë‚˜ì˜ ì‹œìŠ¤í…œì²˜ëŸ¼ ë™ì‘í•˜ì‹œí‚¤ëŠ” ê²ƒì…ë‹ˆë‹¤.

Master ë…¸ë“œ - í´ëŸ¬ìŠ¤í„°ì˜ **ë‘ë‡Œ** ì—­í• ì„ í•©ë‹ˆë‹¤.

| ì»´í¬ë„ŒíŠ¸                   | ì—­í•                         |
| ---------------------- | ------------------------- |
| **API Server**         | ëª¨ë“  í†µì‹ ì˜ ì¤‘ì‹¬. kubectl ëª…ë ¹ì„ ë°›ìŒ |
| **Scheduler**          | Podë¥¼ ì–´ë–¤ ë…¸ë“œì— ë°°ì¹˜í• ì§€ ê²°ì •       |
| **Controller Manager** | ì›í•˜ëŠ” ìƒíƒœë¥¼ ìœ ì§€í•˜ë„ë¡ ê´€ë¦¬          |
| **etcd/SQLite**        | í´ëŸ¬ìŠ¤í„° ìƒíƒœ ë°ì´í„° ì €ì¥            |
Worker ë…¸ë“œ - ì‹¤ì œ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ **ì‹¤í–‰ë˜ëŠ”** ê³³ì…ë‹ˆë‹¤.

| ì»´í¬ë„ŒíŠ¸ | ì—­í•  |
|----------|------|
| **kubelet** | Pod ìƒëª…ì£¼ê¸° ê´€ë¦¬ |
| **kube-proxy** | ë„¤íŠ¸ì›Œí¬ í”„ë¡ì‹œ, ì„œë¹„ìŠ¤ ë¡œë“œë°¸ëŸ°ì‹± |
| **containerd** | ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„ |

## 5. ì¿ ë²„ë„¤í‹°ìŠ¤ í•µì‹¬ ì˜¤ë¸Œì íŠ¸

Kubernetesì˜ ëª¨ë“  ê²ƒì€ **ì˜¤ë¸Œì íŠ¸**ë¡œ í‘œí˜„ë©ë‹ˆë‹¤.

### 5.1 Pod (íŒŒë“œ)

> [!CODE] Pod
> **ê°€ì¥ ì‘ì€ ë°°í¬ ë‹¨ìœ„**ì…ë‹ˆë‹¤. í•˜ë‚˜ ì´ìƒì˜ ì»¨í…Œì´ë„ˆë¥¼ í¬í•¨í•©ë‹ˆë‹¤.
> Pod ë‚´ ì»¨í…Œì´ë„ˆë“¤ì€ **ê°™ì€ IP**ë¥¼ ê³µìœ í•˜ê³ , **localhost**ë¡œ í†µì‹  ê°€ëŠ¥

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: my-pod
spec:
  containers:
  - name: nginx
    image: nginx:1.25
    ports:
    - containerPort: 80
```
### 5.2 Deployment (ë””í”Œë¡œì´ë¨¼íŠ¸)

> [!INFO] Deployment
> Podì˜ **ì„ ì–¸ì  ê´€ë¦¬ì**ì…ë‹ˆë‹¤. ë³µì œë³¸ ìˆ˜, ì—…ë°ì´íŠ¸ ì „ëµ ë“±ì„ ì •ì˜í•©ë‹ˆë‹¤.

```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: nginx-deployment
spec:
  replicas: 3  # Pod 3ê°œ ìœ ì§€
  selector:
    matchLabels:
      app: nginx
  template:  # Pod í…œí”Œë¦¿
    metadata:
      labels:
        app: nginx
    spec:
      containers:
      - name: nginx
        image: nginx:1.25
```
### 5.3 Service (ì„œë¹„ìŠ¤)

> [!CODE] Service
> Podë“¤ì— ëŒ€í•œ **ì•ˆì •ì ì¸ ë„¤íŠ¸ì›Œí¬ ì—”ë“œí¬ì¸íŠ¸**ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

| ìœ í˜•               | ì„¤ëª…               | ì ‘ê·¼ ë²”ìœ„ |
| ---------------- | ---------------- | ----- |
| **ClusterIP**    | í´ëŸ¬ìŠ¤í„° ë‚´ë¶€ IP (ê¸°ë³¸ê°’) | ë‚´ë¶€ë§Œ   |
| **NodePort**     | ë…¸ë“œ IP:í¬íŠ¸ë¡œ ì™¸ë¶€ ë…¸ì¶œ  | ì™¸ë¶€ ê°€ëŠ¥ |
| **LoadBalancer** | ì™¸ë¶€ ë¡œë“œë°¸ëŸ°ì„œ ì—°ê²°      | ì™¸ë¶€ ê°€ëŠ¥ |
```yaml
apiVersion: v1
kind: Service
metadata:
  name: nginx-service
spec:
  selector:
    app: nginx  # ì´ ë¼ë²¨ì„ ê°€ì§„ Podë“¤ë¡œ íŠ¸ë˜í”½ ë¶„ì‚°
  ports:
  - port: 80        # ì„œë¹„ìŠ¤ í¬íŠ¸
    targetPort: 80  # Pod í¬íŠ¸
  type: ClusterIP   # ë‚´ë¶€ ì ‘ê·¼ìš©
```

### 5.4 Namespace (ë„¤ì„ìŠ¤í˜ì´ìŠ¤)

> [!INFO] Namespace
> í´ëŸ¬ìŠ¤í„°ë¥¼ **ë…¼ë¦¬ì ìœ¼ë¡œ ë¶„ë¦¬**í•©ë‹ˆë‹¤.

```bash
# ê¸°ë³¸ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ í™•ì¸
kubectl get namespaces

# ê²°ê³¼
NAME              STATUS   AGE
default           Active   1d
kube-system       Active   1d   # k3s ì‹œìŠ¤í…œ ì»´í¬ë„ŒíŠ¸
kube-public       Active   1d
kubeflow          Active   1d   # Kubeflow ì»´í¬ë„ŒíŠ¸
istio-system      Active   1d   # Istio ì„œë¹„ìŠ¤ ë©”ì‹œ
```
### 5.5 ConfigMap & Secret

> [!INFO] ConfigMap & Secret
> ì„¤ì •ê³¼ ë¹„ë°€ ì •ë³´ë¥¼ Podì™€ ë¶„ë¦¬í•˜ì—¬ ê´€ë¦¬í•©ë‹ˆë‹¤.

```yaml
# ConfigMap: ì¼ë°˜ ì„¤ì •
apiVersion: v1
kind: ConfigMap
metadata:
  name: app-config
data:
  DATABASE_HOST: "mysql.default.svc"
  LOG_LEVEL: "info"

---
# Secret: ë¯¼ê° ì •ë³´ (base64 ì¸ì½”ë”©)
apiVersion: v1
kind: Secret
metadata:
  name: app-secret
type: Opaque
data:
  DB_PASSWORD: cGFzc3dvcmQxMjM=  # password123
```

## 6. ë„¤íŠ¸ì›Œí‚¹ ê°œë…

Kubernetes ë„¤íŠ¸ì›Œí¬ ëª¨ë¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ë„¤íŠ¸ì›Œí¬ ê³„ì¸µ êµ¬ì¡°                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚   ì™¸ë¶€ íŠ¸ë˜í”½                                                          â”‚
â”‚       â”‚                                                                 â”‚
â”‚       â–¼                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                 â”‚
â”‚   â”‚ Ingress       â”‚  â† ì™¸ë¶€ â†’ ë‚´ë¶€ ë¼ìš°íŒ… (ë„ë©”ì¸ ê¸°ë°˜)     â”‚
â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                                                 â”‚
â”‚        â”‚                                                                â”‚
â”‚        â–¼                                                                â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                               â”‚
â”‚   â”‚ Service       â”‚  â† Pod ê·¸ë£¹ì— ëŒ€í•œ ë¡œë“œë°¸ëŸ°ì„œ         â”‚
â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                                               â”‚
â”‚             â”‚                                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”                                               â”‚
â”‚   â”‚                  â”‚                                               â”‚
â”‚   â–¼                   â–¼                                               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”                                         â”‚
â”‚ â”‚ Pod    â”‚  â”‚ Pod    â”‚  â† CNIê°€ IP í• ë‹¹ ë° í†µì‹  ë‹´ë‹¹   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜                                         â”‚
â”‚                                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 CNI (Container Network Interface)

> [!NOTE] CNI
> Pod ê°„ ë„¤íŠ¸ì›Œí¬ í†µì‹ ì„ ë‹´ë‹¹í•˜ëŠ” í”ŒëŸ¬ê·¸ì¸ì…ë‹ˆë‹¤.

| CNI         | íŠ¹ì§•                  | k3s ê¸°ë³¸ê°’ |
| ----------- | ------------------- | ------- |
| **Flannel** | ê°„ë‹¨, ê°€ë²¼ì›€, VXLAN ì˜¤ë²„ë ˆì´ | âœ… ê¸°ë³¸    |
| Calico      | ë„¤íŠ¸ì›Œí¬ ì •ì±…, BGP ì§€ì›     | ì„ íƒ      |
| Cilium      | eBPF ê¸°ë°˜, ê³ ì„±ëŠ¥        | ì„ íƒ      |

```bash
# k3sì˜ Flannel í™•ì¸
kubectl get pods -n kube-system -l app=flannel
```

### 6.3 Service ë„¤íŠ¸ì›Œí‚¹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Service ìœ í˜•ë³„ íŠ¸ë˜í”½ íë¦„                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚   [ClusterIP]                                                    â”‚
â”‚   í´ëŸ¬ìŠ¤í„° ë‚´ë¶€ â†’ Service IP â†’ Pod                         â”‚
â”‚   ì˜ˆ: 10.43.0.100:80                                        â”‚
â”‚                                                                      â”‚
â”‚   [NodePort]                                                    â”‚
â”‚   ì™¸ë¶€ â†’ ë…¸ë“œIP:30000~32767 â†’ Pod                    â”‚
â”‚   ì˜ˆ: 192.168.2.243:30080                               â”‚
â”‚                                                                      â”‚
â”‚   [LoadBalancer]                                             â”‚
â”‚   ì™¸ë¶€ â†’ ì™¸ë¶€IP â†’ ë…¸ë“œ â†’ Pod                                 â”‚
â”‚   ì˜ˆ: MetalLBê°€ ì™¸ë¶€ IP í• ë‹¹                                â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.4 Ingress

> [!NOTE] Ingress
> HTTP/HTTPS íŠ¸ë˜í”½ì„ **ë„ë©”ì¸/ê²½ë¡œ ê¸°ë°˜**ìœ¼ë¡œ ë¼ìš°íŒ…í•©ë‹ˆë‹¤.

```yaml
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: my-ingress
spec:
  rules:
  - host: app.example.com
    http:
      paths:
      - path: /api
        pathType: Prefix
        backend:
          service:
            name: api-service
            port:
              number: 80
      - path: /
        pathType: Prefix
        backend:
          service:
            name: web-service
            port:
              number: 80
```

```
                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   app.example.com   â”‚   Ingress            â”‚
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  â”‚  (Traefik)            â”‚
                       â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                                                      â”‚
         /api â”‚                                                 /    â”‚
              â–¼                                                       â–¼
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚ api-service        â”‚              â”‚ web-service      â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
## 7. ìŠ¤í† ë¦¬ì§€ ê°œë…

> [!CHECK] ìŠ¤í† ë¦¬ì§€ ì¤‘ìš”ì„±
> ì»¨í…Œì´ë„ˆëŠ” **ì¼ì‹œì (ephemeral)** ì…ë‹ˆë‹¤. ì¬ì‹œì‘í•˜ë©´ ë°ì´í„°ê°€ ì‚¬ë¼ì§‘ë‹ˆë‹¤.
> 

```
Pod ì¬ì‹œì‘ ì „:  /data/important.db  â† ì¡´ì¬
Pod ì¬ì‹œì‘ í›„:  /data/important.db  â† ì‚¬ë¼ì§! ğŸ˜±
```
### 7.1 Volume ìœ í˜•

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ìŠ¤í† ë¦¬ì§€ ê³„ì¸µ êµ¬ì¡°                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                           â”‚
â”‚   Pod                                                                   â”‚
â”‚    â”‚                                                                     â”‚
â”‚    â””â”€â”€ Volume (Pod ìˆ˜ëª…)                                       â”‚
â”‚         â”‚                                                                â”‚
â”‚         â””â”€â”€ PersistentVolumeClaim (PVC)                 â”‚
â”‚              â”‚                                                           â”‚
â”‚              â””â”€â”€ PersistentVolume (PV)                      â”‚
â”‚                   â”‚                                                      â”‚
â”‚                   â””â”€â”€ ì‹¤ì œ ìŠ¤í† ë¦¬ì§€ (NFS, ë¡œì»¬, í´ë¼ìš°ë“œ)     â”‚
â”‚                                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

| ê°œë…                              | ì—­í•           | ë¹„ìœ          |
| ------------------------------- | ----------- | ---------- |
| **PersistentVolume (PV)**       | ì‹¤ì œ ìŠ¤í† ë¦¬ì§€     | ì°½ê³          |
| **PersistentVolumeClaim (PVC)** | ìŠ¤í† ë¦¬ì§€ ìš”ì²­     | ì°½ê³  ì„ëŒ€ ê³„ì•½ì„œ  |
| **StorageClass**                | PV ìë™ ìƒì„± ê·œì¹™ | ì°½ê³  ìœ í˜• ì¹´íƒˆë¡œê·¸ |
|                                 |             |            |

```yaml
# PVC: "10GB ìŠ¤í† ë¦¬ì§€ê°€ í•„ìš”í•©ë‹ˆë‹¤"
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: my-data
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 10Gi
  storageClassName: local-path  # k3s ê¸°ë³¸ ìŠ¤í† ë¦¬ì§€
```

```yaml
# Podì—ì„œ PVC ì‚¬ìš©
apiVersion: v1
kind: Pod
metadata:
  name: my-pod
spec:
  containers:
  - name: app
    image: myapp
    volumeMounts:
    - name: data
      mountPath: /data  # ì»¨í…Œì´ë„ˆ ë‚´ ê²½ë¡œ
  volumes:
  - name: data
    persistentVolumeClaim:
      claimName: my-data  # ìœ„ì—ì„œ ë§Œë“  PVC
```

### 7.2 k3s ê¸°ë³¸ ìŠ¤í† ë¦¬ì§€

k3sëŠ” **local-path-provisioner**ë¥¼ ê¸°ë³¸ ì œê³µí•©ë‹ˆë‹¤.

```bash
# StorageClass í™•ì¸
kubectl get storageclass

# ê²°ê³¼
NAME                      PROVISIONER                  RECLAIMPOLICY
local-path (default)   rancher.io/local-path        Delete
```

## 8. kubectl í•„ìˆ˜ ëª…ë ¹ì–´

### 8.1 ê¸°ë³¸ ëª…ë ¹ì–´

```bash
# í´ëŸ¬ìŠ¤í„° ì •ë³´
kubectl cluster-info
kubectl get nodes -o wide

# ëª¨ë“  ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì˜ Pod
kubectl get pods -A

# íŠ¹ì • ë„¤ì„ìŠ¤í˜ì´ìŠ¤
kubectl get pods -n kubeflow
```

### 8.2 ë¦¬ì†ŒìŠ¤ ì¡°íšŒ

```bash
# ê¸°ë³¸ ì¡°íšŒ
kubectl get pods                    # Pod ëª©ë¡
kubectl get deployments             # Deployment ëª©ë¡
kubectl get services                # Service ëª©ë¡
kubectl get all                     # ëª¨ë“  ë¦¬ì†ŒìŠ¤

# ìƒì„¸ ì¡°íšŒ
kubectl get pods -o wide            # ì¶”ê°€ ì •ë³´ (ë…¸ë“œ, IP)
kubectl get pods -o yaml            # YAML í˜•ì‹
kubectl describe pod <pod-name>     # ìƒì„¸ ì„¤ëª…
```

### 8.3 ë¦¬ì†ŒìŠ¤ ìƒì„±/ì‚­ì œ

```bash
# YAML íŒŒì¼ë¡œ ìƒì„±
kubectl apply -f deployment.yaml

# ë¦¬ì†ŒìŠ¤ ì‚­ì œ
kubectl delete -f deployment.yaml
kubectl delete pod <pod-name>
kubectl delete deployment <name>
```

### 8.4 ë””ë²„ê¹…

```bash
# ë¡œê·¸ í™•ì¸
kubectl logs <pod-name>
kubectl logs <pod-name> -f              # ì‹¤ì‹œê°„
kubectl logs <pod-name> -c <container>  # íŠ¹ì • ì»¨í…Œì´ë„ˆ

# Pod ì ‘ì†
kubectl exec -it <pod-name> -- /bin/bash
kubectl exec -it <pod-name> -- sh

# ì´ë²¤íŠ¸ í™•ì¸
kubectl get events --sort-by='.lastTimestamp'

# Pod ìƒíƒœ ë¬¸ì œ í™•ì¸
kubectl describe pod <pod-name>
```

### 8.5 ìœ ìš©í•œ ëª…ë ¹ì–´

```bash
# í¬íŠ¸ í¬ì›Œë”©
kubectl port-forward svc/my-service 8080:80
kubectl port-forward pod/my-pod 8080:80

# ë¦¬ì†ŒìŠ¤ ìˆ˜ì •
kubectl edit deployment <name>
kubectl scale deployment <name> --replicas=5

# ì»¨í…ìŠ¤íŠ¸/ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ë³€ê²½
kubectl config get-contexts
kubectl config use-context <context-name>
kubectl config set-context --current --namespace=kubeflow
```